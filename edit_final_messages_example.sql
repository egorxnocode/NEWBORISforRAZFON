-- ============================================================
-- –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –§–ò–ù–ê–õ–¨–ù–´–• –°–û–û–ë–©–ï–ù–ò–ô
-- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ Supabase SQL Editor –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ
-- ============================================================

-- ============================================================
-- –ü–†–û–°–ú–û–¢–† –¢–ï–ö–£–©–ò–• –°–û–û–ë–©–ï–ù–ò–ô
-- ============================================================

SELECT 
    message_number,
    send_time,
    message_text,
    has_media,
    media_path
FROM final_messages
ORDER BY message_number;


-- ============================================================
-- –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –°–û–û–ë–©–ï–ù–ò–Ø 1 (10:00)
-- ============================================================

UPDATE final_messages 
SET message_text = 'üéâ <b>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –∫—É—Ä—Å–∞!</b>

–í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ 14 –∑–∞–¥–∞–Ω–∏–π –ù–æ–≤–æ–≥–æ–¥–Ω–µ–≥–æ –†–∞–∑–≥–æ–Ω–∞! üéä

–°–µ–≥–æ–¥–Ω—è –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å, –∏ —è –æ—Ç–ø—Ä–∞–≤–ª—é –≤–∞–º –µ—â–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏! üëÄ'
WHERE message_number = 1;


-- ============================================================
-- –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –°–û–û–ë–©–ï–ù–ò–Ø 2 (15:00)
-- ============================================================

UPDATE final_messages 
SET message_text = 'üí° <b>–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</b>

–í–∞—à —Ç–µ–∫—Å—Ç –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
‚Ä¢ –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
‚Ä¢ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–ª–µ–¥—É—é—â–∏—Ö –∫—É—Ä—Å–∞—Ö
‚Ä¢ –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã
‚Ä¢ –ü—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é'
WHERE message_number = 2;


-- ============================================================
-- –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –°–û–û–ë–©–ï–ù–ò–Ø 3 (15:55)
-- ============================================================

UPDATE final_messages 
SET message_text = 'üèÅ <b>–§–∏–Ω–∞–ª –∫—É—Ä—Å–∞</b>

–°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ –ù–æ–≤–æ–≥–æ–¥–Ω–µ–º –†–∞–∑–≥–æ–Ω–µ! 

–ñ–µ–ª–∞—é –≤–∞–º —É—Å–ø–µ—Ö–æ–≤ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –≤–∞—à–µ–≥–æ –∫–∞–Ω–∞–ª–∞ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π! üöÄ

–î–æ –Ω–æ–≤—ã—Ö –≤—Å—Ç—Ä–µ—á! üëã'
WHERE message_number = 3;


-- ============================================================
-- –ò–ó–ú–ï–ù–ï–ù–ò–ï –í–†–ï–ú–ï–ù–ò –û–¢–ü–†–ê–í–ö–ò (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)
-- ============================================================

-- –í–Ω–∏–º–∞–Ω–∏–µ! –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞!

-- –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ 11:00
UPDATE final_messages 
SET send_time = '11:00' 
WHERE message_number = 1;

-- –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –≤—Ç–æ—Ä–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ 16:00
UPDATE final_messages 
SET send_time = '16:00' 
WHERE message_number = 2;

-- –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è —Ç—Ä–µ—Ç—å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ 17:00
UPDATE final_messages 
SET send_time = '17:00' 
WHERE message_number = 3;


-- ============================================================
-- –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï/–í–ö–õ–Æ–ß–ï–ù–ò–ï –ú–ï–î–ò–ê–§–ê–ô–õ–û–í
-- ============================================================

-- –û—Ç–∫–ª—é—á–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è 1
UPDATE final_messages 
SET has_media = false 
WHERE message_number = 1;

-- –í–∫–ª—é—á–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è 1
UPDATE final_messages 
SET has_media = true,
    media_path = 'media/final/final_1.jpg'
WHERE message_number = 1;


-- ============================================================
-- –ò–ó–ú–ï–ù–ï–ù–ò–ï –ü–£–¢–ò –ö –ú–ï–î–ò–ê–§–ê–ô–õ–£
-- ============================================================

-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è 1
UPDATE final_messages 
SET media_path = 'media/final/custom_final_1.jpg'
WHERE message_number = 1;


-- ============================================================
-- –ü–†–û–í–ï–†–ö–ê –°–¢–ê–¢–£–°–ê –û–¢–ü–†–ê–í–ö–ò
-- ============================================================

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
SELECT 
    telegram_id,
    first_name,
    current_task,
    final_message_1_sent,
    final_message_2_sent,
    final_message_3_sent,
    course_finished_at
FROM users
WHERE current_task >= 14
ORDER BY telegram_id;


-- ============================================================
-- –°–ë–†–û–° –°–¢–ê–¢–£–°–ê –û–¢–ü–†–ê–í–ö–ò (–¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏)
-- ============================================================

-- –í–ù–ò–ú–ê–ù–ò–ï! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!
-- –≠—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç –±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ

-- –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è 1 –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
UPDATE users 
SET final_message_1_sent = false 
WHERE current_task >= 14;

-- –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
UPDATE users 
SET final_message_1_sent = false,
    final_message_2_sent = false,
    final_message_3_sent = false
WHERE telegram_id = 123456789;


-- ============================================================
-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê
-- ============================================================

-- –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞–≤–µ—Ä—à–∏–ª–∏ 14 –∑–∞–¥–∞–Ω–∏–µ
SELECT COUNT(*) as total_finished
FROM users
WHERE current_task >= 14;

-- –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–ª—É—á–∏–ª–∏ –∫–∞–∂–¥–æ–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
SELECT 
    SUM(CASE WHEN final_message_1_sent THEN 1 ELSE 0 END) as message_1_sent,
    SUM(CASE WHEN final_message_2_sent THEN 1 ELSE 0 END) as message_2_sent,
    SUM(CASE WHEN final_message_3_sent THEN 1 ELSE 0 END) as message_3_sent,
    COUNT(*) as total_users
FROM users
WHERE current_task >= 14;


-- ============================================================
-- –°–û–í–ï–¢–´ –ü–û –û–§–û–†–ú–õ–ï–ù–ò–Æ –¢–ï–ö–°–¢–ê
-- ============================================================

-- HTML —Ç–µ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
-- <b>–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</b>
-- <i>–∫—É—Ä—Å–∏–≤</i>
-- <u>–ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π</u>
-- <code>–º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π</code>
-- <a href="https://example.com">—Å—Å—ã–ª–∫–∞</a>

-- –≠–º–æ–¥–∑–∏ –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –Ω–∞–ø—Ä—è–º—É—é: üéâ üöÄ üí° ‚ú®

-- –ü—Ä–∏–º–µ—Ä –∫—Ä–∞—Å–∏–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:
UPDATE final_messages 
SET message_text = '‚ú® <b>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</b>

<i>–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –≤—Å–µ 14 –∑–∞–¥–∞–Ω–∏–π!</i>

üìä <b>–í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</b>
‚Ä¢ –ù–∞–ø–∏—Å–∞–Ω–æ –ø–æ—Å—Ç–æ–≤: 14+
‚Ä¢ –†–∞–∑–≤–∏—Ç–∏–µ –∫–∞–Ω–∞–ª–∞: –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
‚Ä¢ –ù–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏: –ø–æ–ª—É—á–µ–Ω—ã

üéÅ <b>–ß—Ç–æ –¥–∞–ª—å—à–µ?</b>
–°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞—à–∏–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏ –≤ –∫–∞–Ω–∞–ª–µ <a href="https://t.me/your_channel">@your_channel</a>

<u>–ñ–µ–ª–∞–µ–º —É—Å–ø–µ—Ö–æ–≤!</u> üöÄ'
WHERE message_number = 1;
