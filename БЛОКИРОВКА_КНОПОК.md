# üîí –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç"
2. –ë–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–∏–∞–ª–æ–≥ (3 –≤–æ–ø—Ä–æ—Å–∞)
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–ù–ï –∑–∞–≤–µ—Ä—à–∞–µ—Ç** –¥–∏–∞–ª–æ–≥ (–Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã)
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ"
5. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ—Å—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
‚ùå –ë–æ—Ç –ù–ï –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–¥–∞–Ω–∏–µ  
‚ùå –°—Å—ã–ª–∫–∞ –ù–ï –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ë–î  
‚ùå `current_task` –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è  
‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø–æ–¥–≤–µ—à–µ–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (–í–∞—Ä–∏–∞–Ω—Ç 1: –§–ª–∞–≥ –≤ –ë–î)

–î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `is_writing_post` –≤ —Ç–∞–±–ª–∏—Ü—É `users`, –∫–æ—Ç–æ—Ä—ã–π –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫—É "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ" –≤–æ –≤—Ä–µ–º—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ AI-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä.

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

```
1. –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç"
   ‚îú‚îÄ is_writing_post = TRUE ‚úÖ
   ‚îú‚îÄ –£–¥–∞–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏
   ‚îî‚îÄ –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ (3 –≤–æ–ø—Ä–æ—Å–∞)

2. –í–æ –≤—Ä–µ–º—è –¥–∏–∞–ª–æ–≥–∞:
   ‚îú‚îÄ –ö–Ω–æ–ø–∫–∞ "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ" –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–ê üîí
   ‚îî‚îÄ –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –Ω–∞–∂–∞—Ç—å: "‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å—Ç–∞!"

3. –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞ (—É—Å–ø–µ—à–Ω–æ):
   ‚îú‚îÄ is_writing_post = FALSE ‚úÖ
   ‚îú‚îÄ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≥–æ—Ç–æ–≤—ã–π –ø–æ—Å—Ç
   ‚îî‚îÄ –ö–Ω–æ–ø–∫–∞ "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ" —Å–Ω–æ–≤–∞ –î–û–°–¢–£–ü–ù–ê üîì

4. –ü—Ä–∏ –æ—à–∏–±–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
   ‚îú‚îÄ is_writing_post = FALSE ‚úÖ
   ‚îú‚îÄ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
   ‚îî‚îÄ –ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ

5. –ö–æ–º–∞–Ω–¥–∞ /cancel:
   ‚îú‚îÄ is_writing_post = FALSE ‚úÖ
   ‚îú‚îÄ –û—á–∏—â–∞–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞
   ‚îî‚îÄ "‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞. –ú–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ."
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### –ù–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`:

```sql
is_writing_post BOOLEAN DEFAULT FALSE
```

**–ó–Ω–∞—á–µ–Ω–∏—è:**
- `FALSE` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –ø–∏—à–µ—Ç –ø–æ—Å—Ç
- `TRUE` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ—Å—Ç–∞

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:**
> TRUE –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ AI-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä. –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫—É "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ" –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /opt/NEWBORISforRAZFON
git pull origin main
```

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î

**–ß–µ—Ä–µ–∑ Supabase Dashboard:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ **SQL Editor**
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:

```sql
-- –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ—Å—Ç–∞
ALTER TABLE users ADD COLUMN IF NOT EXISTS is_writing_post BOOLEAN DEFAULT FALSE;

-- –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
COMMENT ON COLUMN users.is_writing_post IS 'TRUE –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ AI-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä. –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫—É "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ" –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.';

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT 
    COUNT(*) as total_users,
    COUNT(CASE WHEN is_writing_post = TRUE THEN 1 END) as currently_writing_post,
    COUNT(CASE WHEN is_writing_post = FALSE OR is_writing_post IS NULL THEN 1 END) as not_writing_post
FROM users;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
total_users | currently_writing_post | not_writing_post
    150     |           0            |       150
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

```bash
docker-compose up -d --build telegram-bot
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

```bash
docker logs -f telegram-bot
```

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
```
üîí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456789 –Ω–∞—á–∞–ª –ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç (is_writing_post = TRUE)
üîì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456789 –∑–∞–≤–µ—Ä—à–∏–ª –ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç (—É—Å–ø–µ—à–Ω–æ, is_writing_post = FALSE)
```

---

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**

1. –ù–∞–∂–º–∏—Ç–µ "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç"
2. –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ 3 –≤–æ–ø—Ä–æ—Å–∞
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞
4. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –ø–æ—Å—Ç –≤ –∫–∞–Ω–∞–ª–µ
5. –ù–∞–∂–º–∏—Ç–µ "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ"

**–û—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏:**

–ï—Å–ª–∏ –≤—ã –Ω–∞—á–∞–ª–∏ –ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç, –Ω–æ –ø–µ—Ä–µ–¥—É–º–∞–ª–∏:

```
/cancel
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞.

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç".
```

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î:

‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è** (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)  
‚úÖ **–ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**  
‚úÖ **–ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**  
‚úÖ **–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç `is_writing_post = FALSE`**

### –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:

‚ùå **–ù–ï –∏–∑–º–µ–Ω—è–µ—Ç:**
- `course_state`
- `current_task`
- `penalties`
- –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ

‚úÖ **–¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ—Ç:**
- –ö–æ–ª–æ–Ω–∫—É `is_writing_post` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `FALSE`

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø–∏—à—É—Ç –ø–æ—Å—Ç:

```sql
SELECT 
    telegram_id,
    first_name,
    current_task,
    is_writing_post,
    course_state
FROM users
WHERE is_writing_post = TRUE;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í –Ω–æ—Ä–º–µ: 0-3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ï—Å–ª–∏ –º–Ω–æ–≥–æ: –≤–æ–∑–º–æ–∂–Ω–æ, —Ñ–ª–∞–≥–∏ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

### –°–±—Ä–æ—Å–∏—Ç—å —Ñ–ª–∞–≥ –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª):

```sql
-- –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
UPDATE users 
SET is_writing_post = FALSE 
WHERE telegram_id = 123456789;

-- –î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫):
UPDATE users 
SET is_writing_post = FALSE 
WHERE is_writing_post = TRUE;
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```sql
SELECT 
    COUNT(*) FILTER (WHERE is_writing_post = TRUE) as writing_now,
    COUNT(*) FILTER (WHERE is_writing_post = FALSE) as not_writing,
    ROUND(100.0 * COUNT(*) FILTER (WHERE is_writing_post = TRUE) / COUNT(*), 2) as percent_writing
FROM users
WHERE course_state IN ('in_progress', 'limited');
```

---

## üìù –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –Ω–∞–∂–∞—Ç—å "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ" –≤–æ –≤—Ä–µ–º—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ—Å—Ç–∞:

```
‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ AI-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä!

–ò–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥–æ–π /cancel
```

### –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–º–µ–Ω–µ —á–µ—Ä–µ–∑ /cancel:

```
‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞.

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç".
```

### –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ /cancel –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:

```
‚ùå –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –æ—Ç–º–µ–Ω—ã.
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. –ù–∞–∂–º–∏—Ç–µ "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç"
   - ‚úÖ –§–ª–∞–≥: `is_writing_post = TRUE`
   - ‚úÖ –ù–∞—á–∞–ª—Å—è –¥–∏–∞–ª–æ–≥

2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–∂–∞—Ç—å "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ"
   - ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
   - ‚úÖ –ö–Ω–æ–ø–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞

3. –ó–∞–≤–µ—Ä—à–∏—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
   - ‚úÖ –ü–æ—Å—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
   - ‚úÖ –§–ª–∞–≥: `is_writing_post = FALSE`

4. –ù–∞–∂–º–∏—Ç–µ "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ"
   - ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –¢–µ—Å—Ç 2: –û—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏

1. –ù–∞–∂–º–∏—Ç–µ "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç"
   - ‚úÖ –§–ª–∞–≥: `is_writing_post = TRUE`

2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/cancel`
   - ‚úÖ –§–ª–∞–≥: `is_writing_post = FALSE`
   - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ: "–û–ø–µ—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞"

3. –ù–∞–∂–º–∏—Ç–µ "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ"
   - ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –¢–µ—Å—Ç 3: –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

1. –ù–∞–∂–º–∏—Ç–µ "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç"
2. –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
3. (–°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É n8n/AI)
   - ‚úÖ –§–ª–∞–≥: `is_writing_post = FALSE`
   - ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
   - ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç" —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–Ω–∞

---

## üìä –õ–æ–≥–∏

### –£—Å–ø–µ—à–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

```
üîí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456789 –Ω–∞—á–∞–ª –ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç (is_writing_post = TRUE)
üîì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456789 –∑–∞–≤–µ—Ä—à–∏–ª –ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç (—É—Å–ø–µ—à–Ω–æ, is_writing_post = FALSE)
```

### –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

```
üîí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456789 –Ω–∞—á–∞–ª –ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç (is_writing_post = TRUE)
üîì –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456789 –∑–∞–≤–µ—Ä—à–∏–ª –ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç (–æ—à–∏–±–∫–∞, is_writing_post = FALSE)
```

### –û—Ç–º–µ–Ω–∞ —á–µ—Ä–µ–∑ /cancel:

```
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456789 –æ—Ç–º–µ–Ω–∏–ª –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ /cancel
```

---

## ‚ùì FAQ

### –í: –ß—Ç–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç –∏ –∑–∞–∫—Ä—ã–ª Telegram?

**–û:** –§–ª–∞–≥ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è `TRUE`, –Ω–æ:
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–µ –Ω–∞–∂–∞—Ç—å "–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç" - –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—á–Ω–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ
- –ú–æ–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å —Ñ–ª–∞–≥ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SQL (—Å–º. "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞")
- **–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:** –ê–≤—Ç–æ—Å–±—Ä–æ—Å —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç (–±—É–¥—É—â–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

### –í: –ú–æ–∂–µ—Ç –ª–∏ —Ñ–ª–∞–≥ "–∑–∞—Å—Ç—Ä—è—Ç—å" –≤ TRUE?

**–û:** –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –¥–∞, –µ—Å–ª–∏:
- –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞

**–†–µ—à–µ–Ω–∏–µ:** –°–±—Ä–æ—Å–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SQL (—Å–º. "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞")

### –í: –í–ª–∏—è–µ—Ç –ª–∏ —ç—Ç–æ –Ω–∞ –æ–ø–æ–∑–¥–∞–≤—à–∏—Ö (LIMITED) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?

**–û:** –î–∞, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è **–≤—Å–µ—Ö** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–∏–Ω–∞–∫–æ–≤–æ.

### –í: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é?

**–û:** –î–∞, –Ω–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –ú–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏–∑ –∫–æ–¥–∞:

```python
# –í bot.py, callback_submit_task
# –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
# if await is_user_writing_post(user_id):
#     ...
#     return
```

---

## üöÄ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. –ê–≤—Ç–æ—Å–±—Ä–æ—Å —á–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç

–î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∑–∞—Å—Ç—Ä—è–≤—à–∏–µ —Ñ–ª–∞–≥–∏:

```python
@scheduler.scheduled_job('interval', minutes=5)
async def reset_stuck_writing_flags():
    """–°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ñ–ª–∞–≥–∏ is_writing_post —Å—Ç–∞—Ä—à–µ 15 –º–∏–Ω—É—Ç"""
    # TODO: –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É writing_started_at
    # TODO: –Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å is_writing_post = TRUE –∏ writing_started_at > 15 –º–∏–Ω—É—Ç
    # TODO: —Å–±—Ä–æ—Å–∏—Ç—å —Ñ–ª–∞–≥ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```

### 2. –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∞" –≤ –¥–∏–∞–ª–æ–≥–µ

–î–æ–±–∞–≤–∏—Ç—å inline-–∫–Ω–æ–ø–∫—É "‚ùå –û—Ç–º–µ–Ω–∏—Ç—å" –≤–æ –≤—Ä–µ–º—è –¥–∏–∞–ª–æ–≥–∞:

```python
keyboard = InlineKeyboardMarkup(inline_keyboard=[
    [InlineKeyboardButton(text="‚ùå –û—Ç–º–µ–Ω–∏—Ç—å", callback_data="cancel_writing")]
])
```

---

## üìö –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –í–µ—Ä—Å–∏—è 1.0 (24.12.2025)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `is_writing_post` –≤ –ë–î
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ "–°–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ"
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/cancel` –¥–ª—è –æ—Ç–º–µ–Ω—ã
- ‚úÖ –ê–≤—Ç–æ—Å–±—Ä–æ—Å –ø—Ä–∏ –æ—à–∏–±–∫–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 24.12.2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ
