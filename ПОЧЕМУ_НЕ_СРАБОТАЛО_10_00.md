# –ü–æ—á–µ–º—É –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞ —Ä–∞—Å—Å—ã–ª–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ 10:00?

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

### 1. ‚è∞ –ü—Ä–æ–±–ª–µ–º–∞ —Å current_day

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î:**
```sql
SELECT is_active, current_day FROM course_state WHERE id = 1;
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:**
- `is_active = true`
- `current_day >= 15`

**–ï—Å–ª–∏ current_day = 14:**
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ï–©–Å –ù–ê 14 –∑–∞–¥–∞–Ω–∏–∏
- –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤—è—Ç—Å—è
- –ù—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è 9:50, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥–µ–Ω—å 15

**–ï—Å–ª–∏ current_day < 15:**
- –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ current_day >= 15
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –≤ 9:50 - –±—ã–ª –ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å

---

### 2. ‚è∏Ô∏è –ö—É—Ä—Å –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω (is_active = false)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
SELECT is_active FROM course_state WHERE id = 1;
```

**–ï—Å–ª–∏ is_active = false:**
- –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/razgon_stop`
- –í—Å–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ù–ï –æ—Ç–ø—Ä–∞–≤—è—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫—É—Ä—Å –∑–∞–Ω–æ–≤–æ: `/razgon_start`
- –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é: `/final1`, `/final2`, `/final3`

---

### 3. üîÑ –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤ –≤ 10:00

–í 10:00 —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –î–í–ï —Ñ—É–Ω–∫—Ü–∏–∏:
1. `scheduled_send_task()` - –æ–±—ã—á–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –∑–∞–¥–∞–Ω–∏–π
2. `scheduled_final_message_1()` - —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
- –ï—Å–ª–∏ `current_day <= 14`: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±—ã—á–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ
- –ï—Å–ª–∏ `current_day >= 15`: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1

**–û–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç is_active**, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ `/razgon_stop` –æ–±–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è.

---

### 4. ü§ñ –ë–æ—Ç –Ω–µ –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ –±–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω:

```bash
docker-compose restart telegram-bot
# –∏–ª–∏
python bot.py
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```bash
docker logs -f telegram-bot
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:
```
‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1 –≤ 10:00
‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 2 –≤ 15:00
‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 3 –≤ 15:55
```

---

### 5. üìä –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å current_task >= 15

–§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –∫–æ—Ç–æ—Ä—ã–µ **–ó–ê–í–ï–†–®–ò–õ–ò** 14 –∑–∞–¥–∞–Ω–∏–µ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:**
```sql
SELECT COUNT(*) FROM users WHERE current_task >= 15;
```

**–ï—Å–ª–∏ –≤–µ—Ä–Ω—É–ª–æ 0:**
- –ù–∏–∫—Ç–æ –µ—â—ë –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª 14 –∑–∞–¥–∞–Ω–∏–µ
- –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
- –î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–≤–µ—Ä—à–∞—Ç 14 –∑–∞–¥–∞–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```sql
SELECT telegram_id, current_task, 
       final_message_1_sent, 
       final_message_2_sent, 
       final_message_3_sent 
FROM users 
WHERE telegram_id = YOUR_USER_ID;
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤—Ä—É—á–Ω—É—é:

```
/final1  - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ 1
/final2  - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ 2  
/final3  - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ 3
```

**–í–∞–∂–Ω–æ:**
- –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å current_task >= 15
- –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑

---

## üîß –ß–µ–∫–ª–∏—Å—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç 10:00
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å is_active –≤ course_state
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å current_day –≤ course_state (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å >= 15)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å current_task >= 15
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–æ—Ç –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—â–µ–Ω (—Å—Ç—Ä–æ–∫–∞ –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/final1` –≤—Ä—É—á–Ω—É—é –µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞

---

## üìù –õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

**–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å):**
```
üîß –ù–ê–°–¢–†–û–ô–ö–ê –ü–õ–ê–ù–ò–†–û–í–©–ò–ö–ê
üìç –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞: Europe/Moscow
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1 –≤ 10:00
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 2 –≤ 15:00
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 3 –≤ 15:55
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—â–µ–Ω!
```

**–í 10:00 (–µ—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç):**
```
==================================================
‚è∞ –ü–õ–ê–ù–ò–†–û–í–©–ò–ö: –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1 (10:00)
==================================================
üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1 (–¥–µ–Ω—å 15)...
‚úÖ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
```

**–í 10:00 (–µ—Å–ª–∏ –∫—É—Ä—Å –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω):**
```
‚è∏Ô∏è –ö—É—Ä—Å –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω (/razgon_stop), —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1 –ø—Ä–æ–ø—É—â–µ–Ω–æ
```

**–í 10:00 (–µ—Å–ª–∏ current_day < 15):**
```
‚è∏Ô∏è –¢–µ–∫—É—â–∏–π –¥–µ–Ω—å 14, —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
```

---

## üéØ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î:**
   ```sql
   SELECT is_active, current_day FROM course_state WHERE id = 1;
   SELECT COUNT(*) FROM users WHERE current_task >= 15;
   ```

2. **–ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –∏—Å–ø—Ä–∞–≤—å—Ç–µ –≤—Ä—É—á–Ω—É—é:**
   ```sql
   -- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–Ω—å 15 –µ—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª–æ –Ω–∞ 14
   UPDATE course_state SET current_day = 15 WHERE id = 1;
   
   -- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å –µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   UPDATE course_state SET is_active = true WHERE id = 1;
   ```

3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é:**
   ```
   /final1
   /final2  (–≤ 15:00)
   /final3  (–≤ 15:55)
   ```

4. **–î–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –¥–Ω–µ–π - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29 –¥–µ–∫–∞–±—Ä—è 2025
