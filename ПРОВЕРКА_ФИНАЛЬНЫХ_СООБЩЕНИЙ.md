# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫—É—Ä—Å–∞ –≤ –ë–î

```sql
SELECT is_active, current_day FROM course_state WHERE id = 1;
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- `is_active = true` ‚Üê –∫—É—Ä—Å –∞–∫—Ç–∏–≤–µ–Ω
- `current_day = 15` ‚Üê –¥–µ–Ω—å –ø–æ—Å–ª–µ 14 –∑–∞–¥–∞–Ω–∏—è

**–ï—Å–ª–∏ –Ω–µ—Ç:**
```sql
-- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–Ω—å 15
UPDATE course_state SET current_day = 15 WHERE id = 1;

-- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å
UPDATE course_state SET is_active = true WHERE id = 1;
```

---

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```sql
SELECT COUNT(*) as total,
       SUM(CASE WHEN current_task >= 15 THEN 1 ELSE 0 END) as finished_14
FROM users;
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- `finished_14 > 0` ‚Üê –µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–µ 14 –∑–∞–¥–∞–Ω–∏–µ

**–ï—Å–ª–∏ finished_14 = 0:**
- –§–∏–Ω–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã (–Ω–µ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π)
- –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è 14 –∑–∞–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

```bash
docker-compose restart telegram-bot
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```bash
docker logs -f telegram-bot | grep -A 3 "—Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1 –≤ 10:00
‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 2 –≤ 15:00
‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 3 –≤ 15:55
```

---

### 4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é

–ï—Å–ª–∏ —Ä–∞—Å—Å—ã–ª–∫–∞ –≤ 10:00 –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞:

```
/final1
```

**–ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç:**
```
üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1...
‚úÖ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1 –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!
```

**–ó–∞—Ç–µ–º –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è:**
```
/final2  ‚Üê –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ 15:00
/final3  ‚Üê –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ 15:55
```

---

## üìä –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

```sql
-- –°—Ç–∞—Ç—É—Å –∫—É—Ä—Å–∞
SELECT * FROM course_state WHERE id = 1;

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –≥–æ—Ç–æ–≤—ã–µ –∫ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º
SELECT 
    telegram_id,
    first_name,
    current_task,
    final_message_1_sent,
    final_message_2_sent,
    final_message_3_sent,
    course_finished_at
FROM users 
WHERE current_task >= 15
ORDER BY telegram_id;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
SELECT 
    SUM(CASE WHEN final_message_1_sent THEN 1 ELSE 0 END) as msg1_sent,
    SUM(CASE WHEN final_message_2_sent THEN 1 ELSE 0 END) as msg2_sent,
    SUM(CASE WHEN final_message_3_sent THEN 1 ELSE 0 END) as msg3_sent,
    COUNT(*) as total
FROM users
WHERE current_task >= 15;
```

---

## ‚ö†Ô∏è –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: current_day = 14

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ï–©–Å –í–´–ü–û–õ–ù–Ø–Æ–¢ 14 –∑–∞–¥–∞–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:** 
- –î–æ–∂–¥–∞—Ç—å—Å—è 9:50 —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è
- –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é: `UPDATE course_state SET current_day = 15`

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: is_active = false

**–ü—Ä–∏—á–∏–Ω–∞:** –ö—É—Ä—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π `/razgon_stop`

**–†–µ—à–µ–Ω–∏–µ:**
```sql
UPDATE course_state SET is_active = true WHERE id = 1;
```

–ò–ª–∏:
```
/razgon_start
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å current_task >= 15

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∏–∫—Ç–æ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª 14 –∑–∞–¥–∞–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é:
```sql
-- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–µ –¥–µ–ª–∞–π—Ç–µ –Ω–∞ –ø—Ä–æ–¥–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏!)
UPDATE users 
SET current_task = 15 
WHERE telegram_id = YOUR_TEST_USER_ID;
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –°–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
SELECT final_message_1_sent FROM users WHERE telegram_id = YOUR_USER_ID;
```

**–ï—Å–ª–∏ = true:**
- –°–æ–æ–±—â–µ–Ω–∏–µ —É–∂–µ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç

**–°–±—Ä–æ—Å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∞!):**
```sql
UPDATE users 
SET final_message_1_sent = false,
    final_message_2_sent = false,
    final_message_3_sent = false
WHERE telegram_id = YOUR_USER_ID;
```

---

## üéØ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞

1. **–£–±–µ–¥–∏—Ç–µ—Å—å:**
   - `is_active = true`
   - `current_day = 15`
   - –ï—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å `current_task >= 15`
   - –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

2. **–î–æ–∂–¥–∏—Ç–µ—Å—å –≤—Ä–µ–º–µ–Ω–∏:**
   - 15:00 ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ 2
   - 15:55 ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ 3

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç:
/final1  # —Å–µ–π—á–∞—Å
/final2  # –≤ 15:00
/final3  # –≤ 15:55
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- ‚úÖ –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- ‚úÖ –í–∏–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–∑—É
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ä–∞—Å—Å—ã–ª–∫–æ–π

- [ ] –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] `is_active = true` –≤ course_state
- [ ] `current_day = 15` –≤ course_state  
- [ ] –ï—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å `current_task >= 15`
- [ ] –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—É—â–µ–Ω (—Å–º. –ª–æ–≥–∏)
- [ ] –ö–æ–º–∞–Ω–¥—ã `/final1`, `/final2`, `/final3` —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å

**–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
   ```sql
   SELECT * FROM final_messages;
   ```

2. –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã –Ω–µ—Ç - –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```sql
   -- –°–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª setup_final_messages.sql
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—è –≤ users:
   ```sql
   SELECT column_name 
   FROM information_schema.columns 
   WHERE table_name = 'users' 
   AND column_name LIKE 'final_message%';
   ```

4. –ï—Å–ª–∏ –ø–æ–ª–µ–π –Ω–µ—Ç - –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```sql
   -- –°–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª update_users_for_final_messages.sql
   ```

---

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `–ü–û–ß–ï–ú–£_–ù–ï_–°–†–ê–ë–û–¢–ê–õ–û_10_00.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- `–§–ò–ù–ê–õ–¨–ù–´–ï_–°–û–û–ë–©–ï–ù–ò–Ø.md` - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- `ADMINCOMMANDS.md` - –≤—Å–µ –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã
- `START_HERE.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 29 –¥–µ–∫–∞–±—Ä—è 2025
